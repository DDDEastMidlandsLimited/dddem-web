"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2369],{164:(r,e,t)=>{t.d(e,{Au:()=>w,DY:()=>m,LF:()=>h,Mg:()=>c,Sd:()=>l,T_:()=>u,V8:()=>b,ZI:()=>g,jL:()=>f,x1:()=>v,z6:()=>y});var n=t(2969),o=t(3857),i=t(3081),a=t.n(i);function s(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.push.apply(t,n)}return t}function u(){return window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone}function c(){return"onbeforeinstallprompt"in window}var p=null;function l(r){p=r}function f(){return d.apply(this,arguments)}function d(){return(d=(0,o.A)(a().mark(function r(){var e;return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(p){r.next=2;break}throw Error("Install prompt not available");case 2:return p.prompt(),r.next=5,p.userChoice;case 5:return e=r.sent.outcome,p=null,r.abrupt("return",e);case 9:case"end":return r.stop()}},r)}))).apply(this,arguments)}function b(){return!!p}function h(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=function(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?s(Object(t),!0).forEach(function(e){(0,n.A)(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}({type:r,timestamp:new Date().toISOString(),userAgent:navigator.userAgent},e),o=function(){try{var r=localStorage.getItem("pwaInstallEvents");return r?JSON.parse(r):[]}catch(r){return console.error("Error retrieving install events:",r),[]}}();o.push(t);try{localStorage.setItem("pwaInstallEvents",JSON.stringify(o.slice(-10)))}catch(r){console.error("Error storing install event:",r)}}function v(){var r=localStorage.getItem("installPromptDismissed");if(!r)return!1;var e=new Date(r);return(Date.now()-e.getTime())/864e5<7}function w(){localStorage.setItem("installPromptDismissed",new Date().toISOString()),h("prompt_dismissed")}function g(){var r=navigator.userAgent.toLowerCase();if(/android/.test(r))return"android";if(/iphone|ipad|ipod/.test(r))return"ios";if(/windows phone/.test(r))return"windows";if(/mac/.test(r))return"mac";if(/win/.test(r))return"windows";else if(/linux/.test(r))return"linux";return"desktop"}function m(){var r=g(),e={android:'Tap the "Add to Home Screen" option when prompted or find it in your browser menu.',ios:'Tap the Share button and select "Add to Home Screen".',desktop:"Click the install button in your browser's address bar or use the install option in the menu.",windows:"Click the install button in your browser's address bar.",mac:"Click the install button in your browser's address bar.",linux:"Use your browser's install option in the menu.",unknown:'Look for an "Add to Home Screen" or "Install" option in your browser.'};return e[r]||e.unknown}function y(){return"ios"!==g()&&c()}},2369:(r,e,t)=>{t.r(e),t.d(e,{default:()=>c});var n=t(4232),o=t(8847),i=t.n(o);t(164),t(7105);var a=t(7876),s=i()(function(){return Promise.all([t.e(7725),t.e(5905),t.e(8990)]).then(t.bind(t,8990))},{ssr:!1,loadableGenerated:{webpack:function(){return[8990]}}}),u=i()(function(){return Promise.all([t.e(5905),t.e(8500)]).then(t.bind(t,8500))},{ssr:!1,loadableGenerated:{webpack:function(){return[8500]}}});let c=function(r){var e=r.showSettings;return(0,n.useEffect)(function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(r){r.addEventListener("updatefound",function(){var e=r.installing;e&&e.addEventListener("statechange",function(){"installed"===e.state&&navigator.serviceWorker.controller&&window.location.reload()})})})},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s,{}),void 0!==e&&e&&(0,a.jsx)(u,{})]})}},3857:(r,e,t)=>{function n(r,e,t,n,o,i,a){try{var s=r[i](a),u=s.value}catch(r){return void t(r)}s.done?e(u):Promise.resolve(u).then(n,o)}function o(r){return function(){var e=this,t=arguments;return new Promise(function(o,i){var a=r.apply(e,t);function s(r){n(a,o,i,s,u,"next",r)}function u(r){n(a,o,i,s,u,"throw",r)}s(void 0)})}}t.d(e,{A:()=>o})},7105:(r,e,t)=>{t.d(e,{M0:()=>d,VB:()=>k,Wl:()=>h,eG:()=>m,g5:()=>w,hH:()=>c,k1:()=>x,s2:()=>O,yE:()=>u});var n=t(2969),o=t(3857),i=t(3081),a=t.n(i);function s(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.push.apply(t,n)}return t}function u(){return"serviceWorker"in navigator&&"PushManager"in window}function c(){return"Notification"in window?Notification.permission:"unsupported"}function p(){return(p=(0,o.A)(a().mark(function r(){var e;return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(u()){r.next=2;break}throw Error("Push notifications are not supported");case 2:if("granted"!==c()){r.next=4;break}return r.abrupt("return","granted");case 4:return r.next=6,Notification.requestPermission();case 6:return e=r.sent,r.abrupt("return",e);case 8:case"end":return r.stop()}},r)}))).apply(this,arguments)}function l(){return f.apply(this,arguments)}function f(){return(f=(0,o.A)(a().mark(function r(){var e;return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if("serviceWorker"in navigator){r.next=2;break}throw Error("Service workers are not supported");case 2:return r.next=4,navigator.serviceWorker.ready;case 4:return e=r.sent,r.abrupt("return",e);case 6:case"end":return r.stop()}},r)}))).apply(this,arguments)}function d(r){return b.apply(this,arguments)}function b(){return(b=(0,o.A)(a().mark(function r(e){var t,n,o;return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,function(){return p.apply(this,arguments)}();case 3:if("granted"===r.sent){r.next=6;break}throw Error("Notification permission denied");case 6:return r.next=8,l();case 8:return t=r.sent,r.next=11,t.pushManager.getSubscription();case 11:if(!(n=r.sent)){r.next=14;break}return r.abrupt("return",n);case 14:return r.next=16,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e});case 16:return o=r.sent,r.abrupt("return",o);case 20:throw r.prev=20,r.t0=r.catch(0),console.error("Error subscribing to push notifications:",r.t0),r.t0;case 24:case"end":return r.stop()}},r,null,[[0,20]])}))).apply(this,arguments)}function h(){return v.apply(this,arguments)}function v(){return(v=(0,o.A)(a().mark(function r(){var e,t;return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l();case 3:return e=r.sent,r.next=6,e.pushManager.getSubscription();case 6:if(!(t=r.sent)){r.next=11;break}return r.next=10,t.unsubscribe();case 10:return r.abrupt("return",!0);case 11:return r.abrupt("return",!1);case 14:throw r.prev=14,r.t0=r.catch(0),console.error("Error unsubscribing from push notifications:",r.t0),r.t0;case 18:case"end":return r.stop()}},r,null,[[0,14]])}))).apply(this,arguments)}function w(){return g.apply(this,arguments)}function g(){return(g=(0,o.A)(a().mark(function r(){var e,t;return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,u()){r.next=3;break}return r.abrupt("return",!1);case 3:return r.next=5,l();case 5:return e=r.sent,r.next=8,e.pushManager.getSubscription();case 8:return t=r.sent,r.abrupt("return",!!t);case 12:return r.prev=12,r.t0=r.catch(0),console.error("Error checking push subscription status:",r.t0),r.abrupt("return",!1);case 16:case"end":return r.stop()}},r,null,[[0,12]])}))).apply(this,arguments)}function m(r){return y.apply(this,arguments)}function y(){return(y=(0,o.A)(a().mark(function r(e){var t=arguments;return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return"subscribe"===(t.length>1&&void 0!==t[1]?t[1]:"subscribe")?localStorage.setItem("pushSubscription",JSON.stringify(e)):localStorage.removeItem("pushSubscription"),r.abrupt("return",Promise.resolve());case 4:case"end":return r.stop()}},r)}))).apply(this,arguments)}function O(){var r=localStorage.getItem("notificationPreferences");if(r)try{return JSON.parse(r)}catch(r){console.error("Error parsing notification preferences:",r)}return{newContent:!1,eventUpdates:!1,important:!1}}function k(r){localStorage.setItem("notificationPreferences",JSON.stringify(r))}function x(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"granted"===c()&&new Notification(r,function(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?s(Object(t),!0).forEach(function(e){(0,n.A)(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}({icon:"/icons/android-icon-192x192-dunplab-manifest-20421.jpg",badge:"/icons/favicon-96x96-dunplab-manifest-20421.jpg",tag:"ddd-notification"},e))}}}]);